<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>WebAssembly Demo</title>
</head>

<body>
  <h1>WebAssembly Demo</h1>
  <script>
    // Load WASM
    WebAssembly.instantiateStreaming(fetch('/program.wasm'))
      .then(wasm => {
        console.log('WASM Ready.');

        // Make the wasm object accessible
        window.wasm = wasm

        // Log out all exports
        console.log('WebAssembly:');
        console.log(WebAssembly);

        console.log('WebAssembly.Module:');
        console.log(WebAssembly.Module);

        console.log('WebAssembly.Module.exports:');
        console.log(WebAssembly.Module.exports);

        console.log('WebAssembly.Module.exports(wasm.module):');
        console.log(WebAssembly.Module.exports(wasm.module));

        console.log('wasm:');
        console.log(wasm);

        //console.log('instance.exports.getNumber():');
        //console.log(wasm.instance.exports.getNumber());

        // Log out all exported functions
        console.log('instance.exports.getDoubleNumber(80):');
        console.log(wasm.instance.exports.getDoubleNumber(80));

      })
  </script>
</body>

</html>